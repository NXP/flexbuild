# [general]

machine=imx8mm_phygate-tauri-l

# Use PHYTEC U-Boot defconfig for i.MX8MM phyBOARD-Polis
UBOOT_CONFIG="phycore-imx8mm_defconfig"

# PHYTEC-specific U-Boot repository and tag. These control which repo and tag
# the u-boot build will clone and checkout for this board. For PHYTEC boards
# the build will require both values to be defined in the board config. Use
# plain `vX.Y...` or `tags/vX.Y...` for PHYTEC_UBOOT_TAG.
PHYTEC_UBOOT_REPO="git://git.phytec.de/u-boot-imx"
PHYTEC_UBOOT_TAG="v2022.04_2.2.2-phy5"

# PHYTEC-specific Linux kernel repository, tag, and configs for this board
PHYTEC_LINUX_REPO="git://git.phytec.de/linux-imx"
PHYTEC_LINUX_TAG="v5.15.71_2.2.2-phy3"
KERNEL_FRAGMENTS="imx8_phytec_distro.config imx8_phytec_platform.config"

# [composite_firmware] located at build_lsdk2506/images/imx-boot which is phytec's u-boot binary for imx8mm_phygate-tauri-l
COMPOSITE_IMG1_FILE_sd="build_lsdk2506/images/imx-boot"

# Offset for bootloader on SD (33 KiB)
DISK_BOOTLOADER_OFFSET="33792"

# Default distro boot sequence
# Notes:
# - fdtfile default points to PHYTEC Phygate-tauri-l DTB; override in U-Boot env if needed
# - console defaults to ttymxc1 (common on i.MX8MM); adjust if your board uses a different UART
distroboot=\
'env exists fdtfile || setenv fdtfile imx8mm-phygate-tauri.dtb;'\
'env exists image || setenv image Image;'\
'env exists devpart_boot || setenv devpart_boot 1;'\
'env exists devpart_root || setenv devpart_root 3;'\
'part uuid $devtype $devnum:$devpart_root partuuidr;'\
'setenv bootargs console=ttymxc1,115200 root=PARTUUID=$partuuidr rw rootwait $othbootargs;'\
'fat16load mmc $mmcdev:$devpart_boot $fdt_addr $fdt_file;'\
'ext4load mmc $mmcdev:$devpart_boot $loadaddr $image;'\
'booti $loadaddr - $fdt_addr'
